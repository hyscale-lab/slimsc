#!/bin/bash
#PBS -N sim_score_analysis
#PBS -l select=1:ngpus=1
#PBS -l walltime=4:30:00
#PBS -P personal-colinhon
#PBS -q normal
#PBS -j oe

# Set output directory name
OUTPUT_DIR="gpqa_n64_q30"

# Set PBS output file to match output directory
#PBS -o ${OUTPUT_DIR}.o%j

# Change to the working directory
cd /home/users/ntu/colinhon/slimsc/prune/analysis

# Load conda environment
source ~/.bashrc
conda activate vllm

# Run the analysis script
python sim_score_analysis.py \
    --model_arch R1-Distill-Qwen-14B \
    --base_slimsc_dir "/home/users/ntu/colinhon/slimsc" \
    --dataset_name gpqa \
    --control_run_name sc_64_control \
    --n_chains 64 \
    --tokenizer_path /home/users/ntu/colinhon/scratch/r1-distill \
    --num_questions 30 \
    --seed 7 \
    --token_step_size 100 \
    --output_dir ${OUTPUT_DIR} 